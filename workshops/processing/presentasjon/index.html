<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<script src="d3.v3.js"></script>
<script src="stack.v1.js"></script>

<link rel="stylesheet" href="css/style.css">

<script src="js/p5.js" type="text/javascript"></script>
<script src="js/p5.dom.js" type="text/javascript"></script>
<script src="js/p5.sound.js" type="text/javascript"></script>

<script src="js/jquery-2.1.4.js"></script>

<script type="text/javascript" src="js/render.js"></script>

<script type="text/javascript" src="js/prism.js"></script> 
<link rel="stylesheet" href="css/prism.css" type="text/css"/>



<section class="title" style="text-align:left;padding-left:1em;">
    <img class="left-logo" src="top-left.png"></img> 
    <br style="clear:both" />    
    <div style="padding-top: 2em;">
        <h2> Processing og p5.js </h2> 
        <p style="margin-bottom:0px;"> Bjørn Fjukstad </p> 
        <p style="font-size:70%; margin-top:0px;"> PhD Student, Dept. of Comp Sci </p> 
        <p style="font-size: 70%"><a
            href="mailto:bjorn@cs.uit.no">bjorn@cs.uit.no</a></p>
    </div> 
    <img class="bottom-logo" src="bottom-right.png"></img> 
</section> 

<section>
    <h2> Oversikt  </h2> 
    
    <ul>
        <li>Litt snakk om <a href="http://processing.org">Processing</a> og <a
            href="http://p5js.org/">p5js</a></li>
        <li>Masse eksempler</li>
        <li>Oppgaver til dere</li>
    </ul>

    <p> 
        Denne presentasjonen finner dere på <a
            href="http://fjukstad.github.io/laererkonferanse">fjukstad.github.io/laererkonferanse</a>
        og koden til alle eksemplene/oppgavene ligger der. 
    </p>

</section>


<section>
    <h2> Processing </h2> 

    <p> Programmeringsmiljø som gjør det enkelt å bruke kode til å lage
        tegninger, animasjoner og interaktiv grafikk 
    </p> 

    <p> Perfekt for å komme i gang med programmering! </p>

    <p> <a href="http://processing.org">processing.org</a> </p> 

</section> 

<section> 
    <h3>p5.js</h3>
    
    <p> JavaScript-bibliotek som tar Processing inn i nettleseren. </p> 

    <p> Lar oss bruke mer enn det vanlige Processing tegnemiljøet </p> 

    <p><a href="http://p5js.org/reference/">p5js.org/reference</a> har masse
    gode tips og triks </p>
</section>


<section id="circle-rect">
    <h3> Første tegning </h3>
    
<div id="circle-rect-example">
<pre>
<code class="language-javascript">

// ellipse(x, y, bredde, høyde)
ellipse(5, 5, 10, 10);

// rect(x, y, bredde, høyde) 
rect(20, 20, 40, 40);

</code>
</pre>
</div> 
</section> 

<! --

Vi tegner to figurer. Først en ellipse og så et rektangel. Vi kan se på 
hvordan funksjonskallet til ellipsen ser ut. Merk at den bruker x og y
som midtpunkt i ellipsen. Hva skjer om vi bytter bredde og høyde til 100? 

Ok, hva skjer om vi tegner rektangelet først? 

--> 


<section id="variables">
<h3>Variabler </h3>
<div id="variables-example">
<pre>
<code class="language-javascript">

var x = 10;
var y = 20;

var t = "Hei!"

rect(x, y, width/2, height/2); 

text(t, x, y) 

</code>
</pre>
</div> 
</section> 


<section id="setup-draw">
<h3> Setup og Draw </h3>
<p> I p5.js bruker vi to funksjoner for å lage programmer. <i>setup</i>
kjøres én gang når programmet startes, mens <i>draw</i> kjøres hele tida. 
<div id="setup-draw-example">
<pre>
<code class="language-javascript">
var i = 0; 

function setup(){
    createCanvas(400,400)
}

function draw(){
    background(200)
    text("Hei " + i, width/2, height/2) 
    i = i + 1
}
</code>
</pre>
</div> 
</section> 




<section id="randomcircles">
<h3> Tilfeldige sirkler </h3> 
<div id="randomcircles-example"> 
<pre>
<code class="language-javascript">
function setup(){
    createCanvas(400,400)
}
function draw(){
    fill(random(0,255), random(0,255), random(0,255))
    ellipse(random(0,500), random(0,500), 10, 10)
}
</code>
</pre>
</div>
</section>




<section id="mousetrack">
<h3>Følg musa</h3> 
<div id="mousetrack-example">
<pre>
<code class="language-javascript">
function setup(){
    createCanvas(500,500)
}
function draw(){
   if(mouseIsPressed){
           fill(0)
           stroke(255)
       } else {
           fill(255)
           stroke(0)
       }
    ellipse(mouseX, mouseY, 30, 30)
}
</code>
</pre>
</div>

</section>


<section id="sound">
<h3> Lyd </h3>
<div id="sound-example">
<pre>
<code class="language-javascript">
var mic;
function setup(){
  createCanvas(400,400)
  mic = new p5.AudioIn()
  mic.start();
}
function draw(){
  background(0);
  micLevel = mic.getLevel();
  ellipse(width/2, constrain(height-micLevel*height*5, 0, height), 30, 30);
}
</code>
</pre>
</div> 
</section> 


<section id="flocking">
    <a href="flocking.html">Flocking</a> </br> 
    <iframe src="flocking.html"></iframe>
</section>

<section  id="webcam">
    <h3> Webcam </h3>
<div id="webcam-example">
<pre>
<code class="language-javascript">
var capture;

function setup() {
  createCanvas(600, 600);
  capture = createCapture(VIDEO);
  capture.size(600, 600);
  capture.hide();
}

function draw() {
  background(255);
  image(capture, 0, 0, 600, 600);
}
</code>
</pre>
</div>
</section>


<section class="thanks" style="text-align:center;padding-left:1em;">
    <img class="left-logo" src="top-left.png"></img> 
    <br style="clear:both" />
    <div style="padding-top: 2em;">
        <h2> Takk!  </h2> 
        <p style="margin-bottom:0px;"> Bjørn Fjukstad </p> 
        <p style="font-size:70%; margin-top:0px;"> PhD Student, Dept. of Comp Sci </p> 
    </div> 
    <img style="transform: translateY(2em);" class="bottom-logo" src="bottom-right.png"></img> 
</section> 


<!--

<section id="HEADER">
<h3> Header </h3>
<div id="HEADER-example">
<pre>
<code class="language-javascript">

</code>
</pre>
</div> 
</section> 

--> 




<script> 

    var demos = [
        "circle-rect",
        "variables",
        "setup-draw",
        "randomcircles",
        "mousetrack",
        "sound",
        "webcam"
        ]
    
    var demosIndicies = []; 

    var mystack = stack()
        .on("activate", activate)


    var section = d3.selectAll("section"),
        follow = d3.select("#follow"),
        
        followAnchor = d3.select("#follow-anchor"),
        followIndex = section[0].indexOf(follow.node());

    for(var i = 0; i < demos.length; i++){
        var visSelect = d3.select('#'+demos[i])
        demosIndicies.push(section[0].indexOf(visSelect.node()))
        console.log(visSelect,'#'+demos[i]) 
    }


    function refollow() {
      followAnchor.style("top", (followIndex + (1 - mystack.scrollRatio()) / 2 - d3.event.offset) * 100 + "%");
    }

    function activate(d, i) {
      if (i === followIndex) mystack.on("scroll.follow", refollow);

      for(var j = 0; j < demosIndicies.length; j++){
          console.log(i, demosIndicies[j])
          if(i === demosIndicies[j]){
                $("#"+demos[j]+"-example pre.language-javascript").css("display", "inline") 
                $("#"+demos[j]+"-example").addClass("example")
                renderCode()

                $("button.edit_button").on("click", function(){
                    console.log("edit", $(this).val()) 
                    if($(this).text() == "run"){
                        $("pre.language-javascript").css("display", "none") 
                        d3.select(window).on("keydown.stack", function(){return;})
                    } else { 
                        $("pre.language-javascript").css("display", "inline") 
                        d3.select(window).on("keydown.stack", stack.keydown)
                    }
                })

                $("button.reset_button").on("click", function(){
                    $("pre.language-javascript").css("display", "inline") 
                })

          } else {
            $("#"+demos[j]+"-example pre.language-javascript").css("display", "none") 
            $("#"+demos[j]+"-example").removeClass("example")
            $("#"+demos[j]+"-example .edit_space").remove()
            $("#"+ demos[j] +" .cnv_div").remove()

          }
      }
    }
</script> 
